<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Prueba WebSocket Simple</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #log { border: 1px solid #ccc; padding: 10px; height: 250px; overflow-y: auto; background: #f8f8f8; }
        button { padding: 10px 20px; margin-top: 10px; }
    </style>
</head>
<body>

    <h2>ðŸ§ª WebSocket Demo BÃ¡sico</h2>
    <p>Este ejemplo envÃ­a mensajes entre pestaÃ±as usando WebSocket.</p>

    <button onclick="enviar()">ðŸ“¤ Enviar mensaje</button>

    <div id="log"></div>

    <script>
        // ConexiÃ³n WebSocket
        var socket = new WebSocket("wss://socket.ahjende.com/wss/?encoding=text");

        // Mostrar conexiÃ³n
        socket.onopen = function() {
            log("âœ… Conectado al WebSocket");
        };

        // Mostrar mensajes recibidos
        socket.onmessage = function(event) {
            var data = event.data;
            log("ðŸ“¨ Recibido: " + data);
        };

        // Enviar mensaje
        function enviar() {
            var mensaje = {
                tipo: "mensaje_prueba",
                texto: "Hola desde pestaÃ±a " + Math.floor(Math.random() * 100)
            };
            socket.send(JSON.stringify(mensaje));
            log("ðŸ“¤ Enviado: " + JSON.stringify(mensaje));
        }

        // FunciÃ³n log
        function log(mensaje) {
            var t = new Date().toLocaleTimeString();
            var logDiv = document.getElementById("log");
            logDiv.innerHTML += "<p>[" + t + "] " + mensaje + "</p>";
            logDiv.scrollTop = logDiv.scrollHeight;
        }
    </script>

</body>
</html>
